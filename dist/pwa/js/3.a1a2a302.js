(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"0565":function(a,t,e){"use strict";var p=e("16f0"),o=e.n(p);o.a},"16f0":function(a,t,e){},"8b24":function(a,t,e){"use strict";e.r(t);var p=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("q-page",[e("q-card",{staticClass:"no-shadow"},[e("div",{attrs:{id:"map"}})])],1)},o=[],n=e("2f62"),i=e("b3a7"),s=e("e11e"),r=e.n(s),c={data(){return{popup:{type:"popupclose",data:{}},openStreetMap:{}}},computed:{...Object(n["d"])({map:a=>a.map.map,mapData:a=>a.map.mapData,mapInfo:a=>a.map.mapInfo})},watch:{mapInfo(){if(!_.isEmpty(this.mapData)&&this.mapInfo){const a=_.filter(this.mapData,(a=>a.properties.id==this.mapInfo.id));this.assignMap(a,!0)}},popup(a){this.getMapInfo("popupopen"==a.type?a.data:{})}},methods:{...Object(n["b"])({getMapData:"map/getMapData",getMapInfo:"map/getMapInfo"}),async filterMap(a,t){this.$q.loading.show(),await this.clearMap(),await this.getMapData({map:this.map,district:a,city:t}),await this.assignMap(this.mapData),this.$q.loading.hide()},assignMap(a,t){_.isEmpty(a)||this.openStreetMap.panTo(new r.a.LatLng(a[0].geometry.coordinates[1],a[0].geometry.coordinates[0])),_.forEach(a,(a=>{const e=r.a.marker([a.geometry.coordinates[1],a.geometry.coordinates[0]]).addTo(this.openStreetMap).bindPopup(Object(i["c"])(a.properties)).on("popupclose popupopen",(t=>{this.popup={type:t.type,data:a.properties}}));!t||e.openPopup()}))},clearMap(){this.openStreetMap.eachLayer((a=>{!(a instanceof r.a.Marker)||this.openStreetMap.removeLayer(a)})),this.getMapData([]),this.getMapInfo({})}},mounted(){this.openStreetMap=r.a.map("map",{center:[25.039,121.562],zoom:18,closePopupOnClick:!1}),r.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:i["b"],maxZoom:20}).addTo(this.openStreetMap)}},m=c,h=(e("0565"),e("2877")),d=e("9989"),u=e("f09f"),f=e("eebe"),g=e.n(f),l=Object(h["a"])(m,p,o,!1,null,null,null);t["default"]=l.exports;g()(l,"components",{QPage:d["a"],QCard:u["a"]})}}]);